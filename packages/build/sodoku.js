"use strict"
let Caf = require('caffeine-script-runtime');
Caf.defMod(module, () => {return Caf.importInvoke(["Math", "clone"], [global, require('art-standard-lib')], (Math, clone) => {let allLegalNumbers, isValidSequence, allRowsValid, allColumnsValid, allSquaresValid, isAllValid, squareNumberForLocation, get81XY, get9XY, eachElementInColunn, eachElementInRow, eachElementInSquare, getLegalNumbers, invLog2, recursiveSolver, solve; allLegalNumbers = 0b111111111; return {isValidSequence: isValidSequence = function(board, sequenceNumber, eachElementInSequence) {let num; num = 0; eachElementInSequence(board, sequenceNumber, (v) => num += 1 << v - 1); return num === allLegalNumbers;}, allRowsValid: allRowsValid = function(board) {let into, i1; return !(into = null, i1 = 0, (() => {while (i1 < 9) {let i; i = i1; if (into = !isValidSequence(board, i, eachElementInRow)) {break;}; i1++;};})(), into || null);}, allColumnsValid: allColumnsValid = function(board) {let into, i1; return !(into = null, i1 = 0, (() => {while (i1 < 9) {let i; i = i1; if (into = !isValidSequence(board, i, eachElementInColunn)) {break;}; i1++;};})(), into || null);}, allSquaresValid: allSquaresValid = function(board) {let into, i1; return !(into = null, i1 = 0, (() => {while (i1 < 9) {let i; i = i1; if (into = !isValidSequence(board, i, eachElementInSquare)) {break;}; i1++;};})(), into || null);}, isAllValid: isAllValid = function(board) {return allRowsValid(board) && allColumnsValid(board) && allSquaresValid(board);}, squareNumberForLocation: squareNumberForLocation = function(x, y) {return (x / 3 | 0) + (y / 3 | 0) * 3;}, get81XY: get81XY = function(index) {return [index % 9, index / 9 | 0];}, get9XY: get9XY = function(index) {return [index % 3, index / 3 | 0];}, eachElementInColunn: eachElementInColunn = function(board, colNumber, f) {let i1; return (i1 = 0, (() => {while (i1 < 9) {let i; i = i1; f(board[i][colNumber]); i1++;};})(), 9);}, eachElementInRow: eachElementInRow = function(board, rowNumber, f) {let i1; return (i1 = 0, (() => {while (i1 < 9) {let i; i = i1; f(board[rowNumber][i]); i1++;};})(), 9);}, eachElementInSquare: eachElementInSquare = function(board, squareNumber, f) {let x, y, i1; ([x, y] = get9XY(squareNumber)); return (i1 = 0, (() => {while (i1 < 9) {let c, i, j; c = i1; ([i, j] = get9XY(c)); f(board[y * 3 + j][x * 3 + i]); i1++;};})(), 9);}, getLegalNumbers: getLegalNumbers = function(board, x, y) {let squareNumber, illegalNumbers; squareNumber = squareNumberForLocation(x, y); illegalNumbers = 0; eachElementInColunn(board, x, (v) => (v > 0) ? illegalNumbers |= 1 << v - 1 : undefined); eachElementInRow(board, y, (v) => (v > 0) ? illegalNumbers |= 1 << v - 1 : undefined); eachElementInSquare(board, squareNumber, (v) => (v > 0) ? illegalNumbers |= 1 << v - 1 : undefined); return allLegalNumbers - illegalNumbers;}, invLog2: invLog2 = 1 / Math.log(2), recursiveSolver: recursiveSolver = function(board, i81 = 0) {let x, y, legalNumbers, into, i1; ([x, y] = get81XY(i81)); return (() => {switch (false) {case !(0 === board[y][x]): return (0 !== (legalNumbers = getLegalNumbers(board, x, y))) ? (into = null, i1 = 0, (() => {while (i1 < 9) {let i, result; i = i1; if (into = (legalNumbers & 1 << i) ? (board[y][x] = i + 1, (() => {switch (false) {case !(80 === i81): return board; case !(result = recursiveSolver(board, i81 + 1)): return result; default: board[y][x] = 0; return undefined;};})()) : undefined) {break;}; i1++;};})(), into || null) || undefined : undefined; case !(80 === i81): return board; default: return recursiveSolver(board, i81 + 1);};})();}, solve: solve = function(board, a) {return recursiveSolver(clone(board));}};});});
//# sourceMappingURL=sodoku.js.map
