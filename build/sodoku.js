"use strict"
let Caf = require('caffeine-script-runtime');
Caf.defMod(module, () => {return Caf.importInvoke(["Math", "clone"], [global, require('art-standard-lib')], (Math, clone) => {let allLegalNumbers, isValidSequence, allRowsValid, allColumnsValid, allSquaresValid, isAllValid, squareNumberForLocation, get81XY, get9XY, eachElementInColunn, eachElementInRow, eachElementInSquare, getLegalNumbers, invLog2, solveR, solve; allLegalNumbers = 0b111111111; return {isValidSequence: isValidSequence = function(data, sequenceNumber, eachElementInSequence) {let num; num = 0; eachElementInSequence(data, sequenceNumber, (v) => num += 1 << v - 1); return num === allLegalNumbers;}, allRowsValid: allRowsValid = function(data) {let into, i1; return !(into = null, i1 = 0, (() => {while (i1 < 9) {let i; i = i1; if (into = !isValidSequence(data, i, eachElementInRow)) {break;}; i1++;};})(), into || null);}, allColumnsValid: allColumnsValid = function(data) {let into, i1; return !(into = null, i1 = 0, (() => {while (i1 < 9) {let i; i = i1; if (into = !isValidSequence(data, i, eachElementInColunn)) {break;}; i1++;};})(), into || null);}, allSquaresValid: allSquaresValid = function(data) {let into, i1; return !(into = null, i1 = 0, (() => {while (i1 < 9) {let i; i = i1; if (into = !isValidSequence(data, i, eachElementInSquare)) {break;}; i1++;};})(), into || null);}, isAllValid: isAllValid = function(data) {return allRowsValid(data) && allColumnsValid(data) && allSquaresValid(data);}, squareNumberForLocation: squareNumberForLocation = function(x, y) {return (x / 3 | 0) + (y / 3 | 0) * 3;}, get81XY: get81XY = function(index) {return [index % 9, index / 9 | 0];}, get9XY: get9XY = function(index) {return [index % 3, index / 3 | 0];}, eachElementInColunn: eachElementInColunn = function(data, colNumber, f) {let i1; return (i1 = 0, (() => {while (i1 < 9) {let i; i = i1; f(data[i][colNumber]); i1++;};})(), 9);}, eachElementInRow: eachElementInRow = function(data, rowNumber, f) {let i1; return (i1 = 0, (() => {while (i1 < 9) {let i; i = i1; f(data[rowNumber][i]); i1++;};})(), 9);}, eachElementInSquare: eachElementInSquare = function(data, squareNumber, f) {let x, y, i1; ([x, y] = get9XY(squareNumber)); return (i1 = 0, (() => {while (i1 < 9) {let c, i, j; c = i1; ([i, j] = get9XY(c)); f(data[y * 3 + j][x * 3 + i]); i1++;};})(), 9);}, getLegalNumbers: getLegalNumbers = function(data, x, y) {let squareNumber, illegalNumbers; squareNumber = squareNumberForLocation(x, y); illegalNumbers = 0; eachElementInColunn(data, x, (v) => (v > 0) ? illegalNumbers |= 1 << v - 1 : undefined); eachElementInRow(data, y, (v) => (v > 0) ? illegalNumbers |= 1 << v - 1 : undefined); eachElementInSquare(data, squareNumber, (v) => (v > 0) ? illegalNumbers |= 1 << v - 1 : undefined); return allLegalNumbers - illegalNumbers;}, invLog2: invLog2 = 1 / Math.log(2), solveR: solveR = function(data, i81 = 0) {let x, y, legalNumbers, into, i1; ([x, y] = get81XY(i81)); return (() => {switch (false) {case !(0 === data[y][x]): return (0 !== (legalNumbers = getLegalNumbers(data, x, y))) ? (into = null, i1 = 0, (() => {while (i1 < 9) {let i, result; i = i1; if (into = (legalNumbers & 1 << i) ? (data[y][x] = i + 1, (() => {switch (false) {case !(80 === i81): return data; case !(result = solveR(data, i81 + 1)): return result; default: data[y][x] = 0; return undefined;};})()) : undefined) {break;}; i1++;};})(), into || null) || undefined : undefined; case !(80 === i81): return data; default: return solveR(data, i81 + 1);};})();}, solve: solve = function(data, a) {return solveR(clone(data));}};});});
//# sourceMappingURL=sodoku.js.map
